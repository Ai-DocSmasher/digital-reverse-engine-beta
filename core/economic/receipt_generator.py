import hashlibimport jsonimport timeimport numpy as npdef _hash_audio(audio: np.ndarray) -> str:    """Create a stable hash of audio data."""    audio_bytes = audio.tobytes()    return hashlib.sha256(audio_bytes).hexdigest()def generate_receipt(    input_audio: np.ndarray,    output_audio: np.ndarray,    metadata: dict,    mode: str,    tier: str,    datacostunits: float,    gating: dict,):    """Generate a cryptographic-style receipt for the reverse operation."""    timestamp = time.time()    receipt = {        "timestamp": timestamp,        "mode": mode,        "tier": tier,        "metadata": metadata,        "datacostunits": datacostunits,        "gating": gating,        "input_hash": _hash_audio(input_audio),        "output_hash": _hash_audio(output_audio),    }    # Signature = hash of entire receipt JSON    signature = hashlib.sha256(json.dumps(receipt, sort_keys=True).encode()).hexdigest()    receipt["signature"] = signature    return receipt