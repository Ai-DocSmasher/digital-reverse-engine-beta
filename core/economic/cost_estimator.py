import jsonimport osclass CostEstimator:    def __init__(self):        base = os.path.dirname(__file__)        weights_path = os.path.join(base, "cost_weights.json")        rules_path = os.path.join(base, "gating_rules.json")        # Load cost weights        if os.path.exists(weights_path):            with open(weights_path, "r") as f:                self.weights = json.load(f)        else:            self.weights = {                "complexity_factor": 1.0,                "transient_density": 1.0,                "quality_proxy_score": 1.0,            }        # Load gating rules        if os.path.exists(rules_path):            with open(rules_path, "r") as f:                self.rules = json.load(f)        else:            self.rules = {                "free": {"max_cost": 10},                "trial": {"max_cost": 20},                "premium": {"max_cost": 9999},                "enterprise": {"max_cost": 999999},            }    def estimate_cost(self, metadata: dict) -> float:        """Compute a simple weighted cost score."""        cost = 0.0        for key, weight in self.weights.items():            if key in metadata:                cost += metadata[key] * weight        return float(cost)    def apply_gating(self, cost: float, tier: str) -> dict:        """Return gating decision based on tier rules."""        tier_rules = self.rules.get(tier, {"max_cost": 10})        allowed = cost <= tier_rules["max_cost"]        return {            "tier": tier,            "allowed": allowed,            "max_cost": tier_rules["max_cost"],            "reason": "ok" if allowed else "cost_exceeded",        }